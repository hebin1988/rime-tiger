# Rime schema
# encoding: utf-8
# CC-BY-4.0

schema:
  author:
    - Hertz Hwang <hertz@26hz.com.cn>
  dependencies:
    - charset
    - pinyin
    - fast_symbol
    - tiger_spelling_pseudo
    - radical_flypy
    - easy_en
    - japanese
    - tiger_codes
    - tiger_oni
    - tiger_phrases
  description: |
    èµ«å…¹è™å•æ•´å¥Â·å¹¶å‡»
  name: "ğŸ¯å¥Â·å•Â·å¹¶å‡»"
  schema_id: tiger_phrase_chord
  version: "2024-12-22"

__patch:
  - tiger_phrase_chord.custom:/patch?
  - engine/processors/@before 4: lua_processor@*hertz.chord_composer_processor
  - engine/filters/@next: simplifier@chinese_english
  - engine/filters/@next: lua_filter@*hertz.tiger_spelling*filter

__include: tiger:/switches_engine_script       # Rimeæ¨¡å—
__include: tiger:/fast_symbol_translator       # å¿«ç¬¦
__include: tiger:/easy_en_translator           # è‹±æ–‡
__include: tiger:/japanese_translator          # æ—¥æ–‡
__include: tiger:/radical_flypy_translator     # éƒ¨ä»¶æ‹†å­—
__include: tiger:/tiger_codes_translator       # å®˜æ–¹è™è¯
__include: tiger:/tiger_oni_translator         # ä¹é‡é¬¼è™
__include: tiger:/tiger_phrase_translator      # èµ«å…¹è™å•æ•´å¥
__include: tiger:/tiger_phrases_translator     # å®˜æ–¹è™è¯æ•´å¥
__include: tiger:/reverse_lookup_translator_xh # å°é¹¤åæŸ¥
__include: tiger:/s2t_filter                   # ç®€ç¹æ»¤é•œ
__include: tiger:/history_filter               # z é”®å†å²
__include: tiger:/emoji_filter                 # Emoji æ»¤é•œ
__include: tiger:/cn_en_filter                 # ä¸­è‹±æ»¤é•œ
__include: tiger:/mars_filter                  # ç«æ˜Ÿæ–‡æ»¤é•œ
__include: tiger:/embeded_cands_filter         # å€™é€‰åµŒå…¥
__include: tiger:/hertz                        # Hertzå®šåˆ¶

speller:
  alphabet: qwertyuiopasdfghjklzxcvbnmQWERTYUIOPASDFGHJKLZXCVBNM1234567890:,.?!^'"$~%&*()+-=\;
  delimiter: "_"
  algebra:
    __patch:
      - tiger:/algebra/core        # æ ¸å¿ƒæ‹¼ç®—
      #- tiger:/algebra/phrase      # æ•´å¥æ‹¼ç®—
      - tiger:/algebra/erase       # æ“¦é™¤ç¼–ç 

translator:
  dictionary: tiger_phrase_chord
  enable_user_dict: false
  enable_charset_filter: false
  enable_encoder: false
  enable_sentence: false
  encode_commit_history: false
  enable_completion: false
  preedit_format:
    # æ‰‹åŠ¨åˆ†è¯æ ‡è®°
    - xform/([a-z]{4})[']/$1â´/
    - xform/([a-z]{3})[']/$1Â³/
    - xform/([a-z]{2})[']/$1Â²/
    - xform/([a-z]{1})[']/$1Â¹/
    # è‡ªåŠ¨åˆ†è¯æ ‡è®°
    - xform/([a-z]{1,4})[_]/$1â£/
    # å…¶ä½™å¤„ç†
    #- xform/([A-Z])/\L$1/
    - xform/([A-Z])/$1Â°/  # å¹¶å‡»æç¤ºç¬¦ï¼Œå¯é€‰ Â° âˆ áµ† Ê¬ Ëœ 
    - xform/([Â¹Â²Â³â´][a-z]+)[_']/$1/
    - xform/([Â¹Â²Â³â´])_/$1/
    - xform/_/â£/
    #- xlit/ABCDEFGHIJKLMNOPQRSTUVWXYZ/áº¡á¸…Ä‹á¸áº¹á¸ŸÄ¡á¸¥á»‹Äµá¸³á¸·á¹ƒá¹‡á»á¹—ê—á¹›á¹£á¹­á»¥á¹¿áº‰áº‹á»µáº“/
    #- xlit/ABCDEFGHIJKLMNOPQRSTUVWXYZ/â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“â“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©/

key_binder:
  import_preset: default
  custom_bindings:
    __append:
      # åœ¨é€™è£æ·»åŠ åªåœ¨æœ¬æ–¹æ¡ˆä¸­ç”Ÿæ•ˆçš„æŒ‰éµç¶å®š
  bindings:
    __patch:
      - :/key_binder/custom_bindings?
      - tiger:/keys/emacs_mode
      - tiger:/keys/tab
      - tiger:/keys/page_up_down
      #- tiger:/keys/selector
      - tiger:/keys/options_toggle

#__include: tiger:/rec
recognizer:
  import_preset: default
  patterns:
    punct: '^/([0-9]0?|[A-Za-z]+)$'
    #radical_flypy: "^R[a-z]*`?$"
    reverse_lookup: "^`[a-z]*'?$"
    expression: '^=.*$'

punctuator:
  #import_preset:
  __include: tiger:/punctuator

# é»˜è®¤å¯ç”¨è¯­è¨€æ¨¡å‹
#__include: tiger:/octagram/enable_for_chars
# è‹¥è¦ç¦ç”¨ï¼Œå¯ç›´æ¥æ³¨é‡Šæ‰ä¸Šé¢çš„ __include

tiger_spelling:
  lua:
    switch_key: "Control+c"
    cycle_key: "Shift+Control+C"
schema_name:
  spelling: tiger_spelling_pseudo
  code: tiger_phrase_chord

menu:
  page_size: 1

chord_composer:
  use_ctrl: false
  use_alt: false
  use_shift: false
  use_super: false
  use_caps: false
  finish_trigger_release_num: 999
  finish_chord_on_first_key_release: true
  alphabet: qazwsxedcrfvtgbyhnujmikolp `
  #alphabet: qazwsxedcrfvtgbyhnujmik,ol.p;/ `

  algebra:
    #- xlit|;,./|ACXZ|
    - xlit| |ä¸€| # ä¸»ç©ºæ ¼
    - xform=([qwertasdfgzxcvb])ä¸€=\U$1=
    - xform=([yuiophjklnm])ä¸€=\U$1=

    - xform|^ä¸€|1|

    - xform/1/ /
